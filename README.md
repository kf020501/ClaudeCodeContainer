Claude Code Docker Container
================================================================================

AnthropicのClaude Codeをコンテナ化したプロジェクトです。開発環境を汚さずに、Claude Codeをどこでも使用できます。


概要
--------------------------------------------------------------------------------

| 項目                   | 説明                                                              |
| ---------------------- | ----------------------------------------------------------------- |
| **隔離された環境**     | Dockerコンテナ内でClaude Codeを実行                               |
| **柔軟なマウント**     | 任意のディレクトリを作業ディレクトリとしてマウント可能            |
| **設定の永続化**       | `.claude`ディレクトリと`.claude.json`をマウントして設定を完全保持 |
| **Ubuntu 22.04ベース** | 安定した環境でNode.js 20.xを使用                                  |


使い方
--------------------------------------------------------------------------------

### Docker操作

| コマンド                           | 説明                                         |
| ---------------------------------- | -------------------------------------------- |
| `make build`                       | Docker イメージをビルド                      |
| `make run`                         | Claude Codeを対話モードで実行（デフォルト）  |
| `make run WORK=/path/to/project`   | 特定のディレクトリを指定して実行             |
| `make shell`                       | コンテナ内でシェルを開く                     |
| `make shell WORK=/path/to/project` | 特定のディレクトリをマウントしてシェルを開く |
| `make clean`                       | イメージを削除                               |


### 初回起動時の設定

初回起動時は以下の設定が必要です：

1. **APIキーの設定**: AnthropicのAPIキーを入力
2. **プロジェクト設定**: 作業ディレクトリやプロジェクト名を設定

設定は自動的に永続化されるため、次回起動時は不要です。


### Claude Codeのスラッシュコマンド（/コマンド）

Claude Codeでは、`/`で始まるコマンドを使用して効率的に作業できます：

| コマンド  | 説明                                   | 使用例                          |
| --------- | -------------------------------------- | ------------------------------- |
| `/search` | プロジェクト内のファイルやコードを検索 | `/search "function login"`      |
| `/edit`   | 特定のファイルを編集モードで開く       | `/edit src/app.js`              |
| `/create` | 新しいファイルを作成                   | `/create components/Button.jsx` |
| `/run`    | コマンドを実行                         | `/run npm test`                 |
| `/tree`   | ディレクトリ構造を表示                 | `/tree src/`                    |
| `/diff`   | ファイルの差分を表示                   | `/diff file1.js file2.js`       |
| `/help`   | ヘルプを表示                           | `/help`                         |
| `/clear`  | 会話履歴をクリア                       | `/clear`                        |


設計内容
--------------------------------------------------------------------------------

### ディレクトリ構成

```
.
├── Dockerfile          # コンテナイメージの定義
├── Makefile            # ビルドと実行の自動化
└── README.md           # このファイル
```

### アーキテクチャ

| コンポーネント         | 詳細                                  |
| ---------------------- | ------------------------------------- |
| **ベースイメージ**     | Ubuntu 22.04                          |
| **Node.js**            | LTS版（20.x）                         |
| **Claude Code**        | npmから最新版をグローバルインストール |
| **ユーザー**           | 非rootユーザー（user）、sudo権限付き  |
| **作業ディレクトリ**   | `/home/user/work`                     |
| **エントリーポイント** | `claude`コマンド                      |

### マウント設定

| ホスト           | コンテナ                  | 用途                                       |
| ---------------- | ------------------------- | ------------------------------------------ |
| `~/.claude`      | `/home/user/.claude`      | API認証情報、todos、プロジェクト設定       |
| `~/.claude.json` | `/home/user/.claude.json` | テーマ、オンボーディング状態、ユーザー設定 |
| `$(WORK)`        | `/home/user/work`         | プロジェクトファイル                       |

### 環境変数

| 変数名       | デフォルト値  | 説明                             |
| ------------ | ------------- | -------------------------------- |
| `IMAGE_NAME` | `claude-code` | Docker イメージ名                |
| `IMAGE_TAG`  | `latest`      | イメージタグ                     |
| `CLAUDE_DIR` | `~/.claude`   | 設定ディレクトリパス             |
| `WORK`       | -             | 実行時に指定する対象ディレクトリ |


要件
--------------------------------------------------------------------------------

| 項目                   | 説明                    |
| ---------------------- | ----------------------- |
| **Docker**             | コンテナ実行環境        |
| **Make**               | ビルドツール            |
| **AnthropicのAPIキー** | Claude Codeの利用に必要 |
